{{#if this.error}}
  <div class="cell">
    <div class="grid-container">
      <div class="grid-x grid-padding-x grid-padding-y align-middle" style="min-height: 50vh">
        <div class="cell large-6 large-offset-3 text-center">
          <h2>Oops!</h2>
          <p>{{this.error}}</p>
        </div>
      </div>
    </div>
  </div>
{{else}}
  <div class="grid-container">
    <div class="grid-x grid-x-container">
      {{#if this.dispositions.firstObject.publichearinglocation}}
        <fieldset class="medium-margin-bottom recommendation-quorum-fieldiset">
          <strong>
            <legend>
              Was a Quorum Present at your hearing?
            </legend>
          </strong>
          <p class="help-text">
            A quorum requires the presence of 20% of appointed board members, and not fewer than seven members.
          </p>
          {{#each this.dispositions as |disposition|}}
            {{#if disposition.dateofpublichearing}}
              <p class="text-small dark-gray">
                Hearing occurred
                on {{moment-format disposition.dateofpublichearing "MM/D/YYYY"}}
                at {{disposition.publichearinglocation}}
              </p>
            {{/if}}
            <input type="radio"
              name={{concat idx '-quorum'}}
              id={{concat idx '-quorum-yes'}}
              checked={{if disposition.wasaquorumpresent "checked"}}
              onClick={{action 'updateDispositionAttr' disposition 'wasaquorumpresent' true}}
            />
            <label
              for="{{concat idx '-quorum-yes'}}"
              {{action 'updateDispositionAttr' disposition 'wasaquorumpresent' true}}
            >
              Yes
            </label>
            <input type="radio"
              name={{concat idx '-quorum'}}
              id={{concat idx '-quorum-no'}}
              checked={{if (eq disposition.wasaquorumpresent false) "checked"}}
              onClick={{action 'updateDispositionAttr' disposition 'wasaquorumpresent' false}}
            />
            <label
              for="{{concat idx '-quorum-no'}}"
              {{action 'updateDispositionAttr' disposition 'wasaquorumpresent' false}}
            >
              No
            </label>
          {{/each}}
        </fieldset>
      {{/if}}
      {{#if (gt this.dispositions.length 1)}}
        <fieldset class="medium-margin-bottom">
          <legend><strong>Would you like to submit a single recommendation for all actions?</strong></legend>
          <input
            type="radio"
            name="all-action-yes"
            id="all-action-yes"
            checked={{if (eq this.submitOneRec true) "checked"}}
            onClick={{action "setProp" "submitOneRec" true}}
          />
          <label for="all-action-yes">
            Yes
          </label>
          <input
            type="radio"
            name="all-action-no"
            id="all-action-no"
            checked={{if (eq this.submitOneRec false) "checked"}}
            onClick={{action "setProp" "submitOneRec" false}}
          />
          <label for="all-action-no">
            No, I will submit a recommendation for each action
          </label>
        </fieldset>
      {{/if}}
      {{#if (eq this.submitOneRec true)}}
        <fieldset class="medium-margin-bottom recommendation-all-actions-fieldset">
          <legend><strong>Recommendation for all actions</strong></legend>
          <PowerSelect
            @searchEnabled={{false}}
            @options={{this.recOptions}}
            @placeholder="Select a recommendation"
            @selected={{this.dispositionForAllActions.recommendation}}
            @onchange={{action (mut this.dispositionForAllActions.recommendation)}}
            as |recOption|
          >
            {{recOption}}
          </PowerSelect>
          {{#if (not-eq participantType 'BP')}}
            <legend><strong>Vote Counts</strong></legend>
            <div class="grid-x grid-margin-x">
              <div  class="cell medium-3">
                <label for="vote-in-favor">Votes In Favor</label>
                <Input  
                  @id="vote-in-favor"
                  @type="number"
                  @value={{this.dispositionForAllActions.votesInFavor}}
                  @key-up={{fn (mut this.dispositionForAllActions.votesInFavor) value="target.value"}}
                />
              </div>
              <div  class="cell medium-3">
                <label for="vote-against">Votes Against</label>
                <Input
                  @id="vote-against" 
                  @type="number"
                  @value={{this.dispositionForAllActions.votesAgainst}}
                  @key-up={{fn (mut this.dispositionForAllActions.votesAgainst) value="target.value"}}
                />
              </div>
              <div  class="cell medium-3">
                <label for="vote-abstain">Abstain</label>
                <Input
                  @id="vote-abstain"
                  @type="number"
                  @value={{this.dispositionForAllActions.votesAbstain}}
                  @key-up={{fn (mut this.dispositionForAllActions.votesAbstain) value="target.value"}}
                />
              </div>
              <div  class="cell medium-3">
                <label for="vote-total-members">Total Members</label>
                <Input
                  @id="vote-total-members"
                  @type="number"
                  @value={{this.dispositionForAllActions.votesTotalMembers}}
                  @key-up={{fn (mut this.dispositionForAllActions.votesTotalMembers) value="target.value"}}
                />
              </div>
            </div>
            <div class="grid-x grid-margin-x">
              <div class="cell medium-6">
                <label for="vote-location">Vote Location</label>
                <Input
                  @type="text"
                  @placeholder="Add a location"
                  @autocomplete="off"
                  @value={{this.dispositionForAllActions.voteLocation}}
                  @key-up={{fn (mut this.dispositionForAllActions.voteLocation) value="target.value"}}
                />
              </div>
              <div class="cell medium-6">
                <label for="vote-location">Vote Date</label>
                <PikadayInput
                  @id="vote-location"
                  @placeholder='Select a date'
                  @value={{this.dispositionForAllActions.voteDate}}
                  @format='MM/DD/YYYY'
                  @onSelection={{fn (mut this.dispositionForAllActions.voteDate) value="target.value"}}
                />
              </div>
            </div>
            <div class="grid-x grid-margin-x">
              <div class="cell">
                <label
                  for="recommendation-comment"
                >
                  Recommendation Comments
                </label>
                <Textarea
                  @value={{this.dispositionForAllActions.comment}}
                  @placeholder="Add comment for all Recommendations here."
                  @rows="4"
                />
              </div>
            </div>
          {{/if}}
        </fieldset>
      {{/if}}
      {{#if (eq this.submitOneRec false)}}
        <fieldset class="medium-margin-bottom recommendation-by-action-fieldset">
          <legend>
            <strong>
              Submit a Recommendation by action
            </strong>
          </legend>
        </fieldset>
      {{/if}}
    </div>
  </div>
  {{outlet}}
{{/if}}
