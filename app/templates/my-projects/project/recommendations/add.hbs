{{#if this.error}}
  <div class="cell">
    <div class="grid-container">
      <div class="grid-x grid-padding-x grid-padding-y align-middle" style="min-height: 50vh">
        <div class="cell large-6 large-offset-3 text-center">
          <h2>Oops!</h2>
          <p>{{this.error}}</p>
        </div>
      </div>
    </div>
  </div>
{{else}}
  <div class="grid-container">
    <div class="grid-x grid-x-container">
      {{#if this.dispositions.firstObject.publichearinglocation}}
        <div class="cell">
          <fieldset class="medium-margin-bottom recommendation-quorum-fieldiset">
            <strong>
              <legend>
                Was a Quorum Present at your hearing?
              </legend>
            </strong>
            <p class="help-text">
              A quorum requires the presence of 20% of appointed board members, and not fewer than seven members.
            </p>
            {{#each this.dispositions as |disposition|}}
              {{#if disposition.dateofpublichearing}}
                <p class="text-small dark-gray">
                  Hearing occurred
                  on {{moment-format disposition.dateofpublichearing "MM/D/YYYY"}}
                  at {{disposition.publichearinglocation}}
                </p>
              {{/if}}
              <input type="radio"
                name={{concat idx '-quorum'}}
                id={{concat idx '-quorum-yes'}}
                checked={{if disposition.wasaquorumpresent "checked"}}
                onClick={{action 'updateDispositionAttr' disposition 'wasaquorumpresent' true}}
              />
              <label
                for="{{concat idx '-quorum-yes'}}"
                {{action 'updateDispositionAttr' disposition 'wasaquorumpresent' true}}
              >
                Yes
              </label>
              <input type="radio"
                name={{concat idx '-quorum'}}
                id={{concat idx '-quorum-no'}}
                checked={{if (eq disposition.wasaquorumpresent false) "checked"}}
                onClick={{action 'updateDispositionAttr' disposition 'wasaquorumpresent' false}}
              />
              <label
                for="{{concat idx '-quorum-no'}}"
                {{action 'updateDispositionAttr' disposition 'wasaquorumpresent' false}}
              >
                No
              </label>
            {{/each}}
          </fieldset>
        </div>
      {{/if}}
      {{#if (gt this.dispositions.length 1)}}
        <div class="cell">
          <fieldset class="medium-margin-bottom">
            <legend>
              <strong>
                Would you like to submit a single recommendation for all actions?
              </strong>
            </legend>
            <input
              type="radio"
              name="all-actions-yes"
              id="all-actions-yes"
              checked={{if (eq this.submitOneRec true) "checked"}}
              onClick={{action "setProp" "submitOneRec" true}}
            />
            <label for="all-actions-yes">
              Yes
            </label>
            <input
              type="radio"
              name="all-actions-no"
              id="all-actions-no"
              checked={{if (eq this.submitOneRec false) "checked"}}
              onClick={{action "setProp" "submitOneRec" false}}
            />
            <label for="all-actions-no">
              No, I will submit a recommendation for each action
            </label>
          </fieldset>
        </div>
      {{/if}}
      {{#if (eq this.submitOneRec true)}}
        <div class="cell">
          <fieldset class="medium-margin-bottom recommendation-all-actions-fieldset">
            <legend>
              <strong>
                Recommendation for all actions
              </strong>
            </legend>
            <PowerSelect
              @searchEnabled={{false}}
              @options={{this.recOptions}}
              @placeholder="Select a recommendation"
              @selected={{this.dispositionForAllActions.recommendation}}
              @onchange={{action (mut this.dispositionForAllActions.recommendation)}}
              as |recOption|
            >
              {{recOption}}
            </PowerSelect>
            {{#if (or (eq participantType 'CB') (eq participantType 'BB'))}}
              <legend>
                <strong>
                  Vote Counts
                </strong>
              </legend>
              <div class="grid-x grid-margin-x">
                <div  class="cell medium-3">
                  <label for="all-actions-votes-in-favor">
                    Votes In Favor
                  </label>
                  <Input  
                    @id="all-actions-votes-in-favor"
                    @type="number"
                    @value={{this.dispositionForAllActions.votesInFavor}}
                    @key-up={{fn (mut this.dispositionForAllActions.votesInFavor) value="target.value"}}
                  />
                </div>
                <div  class="cell medium-3">
                  <label for="all-actions-votes-against">
                    Votes Against
                  </label>
                  <Input
                    @id="all-actions-votes-against"
                    @type="number"
                    @value={{this.dispositionForAllActions.votesAgainst}}
                    @key-up={{fn (mut this.dispositionForAllActions.votesAgainst) value="target.value"}}
                  />
                </div>
                <div  class="cell medium-3">
                  <label for="all-actions-votes-abstain">
                    Abstain
                  </label>
                  <Input
                    @id="all-actions-votes-abstain"
                    @type="number"
                    @value={{this.dispositionForAllActions.votesAbstain}}
                    @key-up={{fn (mut this.dispositionForAllActions.votesAbstain) value="target.value"}}
                  />
                </div>
                <div  class="cell medium-3">
                  <label for="all-actions-votes-total-members">
                    Total Members
                  </label>
                  <Input
                    @id="all-actions-votes-total-members"
                    @type="number"
                    @value={{this.dispositionForAllActions.votesTotalMembers}}
                    @key-up={{fn (mut this.dispositionForAllActions.votesTotalMembers) value="target.value"}}
                  />
                </div>
              </div>
            {{/if}}
            <div class="grid-x grid-margin-x">
              <div class="cell">
                <label
                  for="all-actions-comment"
                >
                  Recommendation Comment for all actions.
                </label>
                <Textarea
                  @id="all-actions-comment"
                  @value={{this.dispositionForAllActions.comment}}
                  @placeholder="Add Recommendation comment for all actions here."
                  @rows="4"
                />
              </div>
            </div>
          </fieldset>
        </div>
      {{/if}}
      {{#if (eq this.submitOneRec false)}}
        <div class="cell">
          <fieldset class="medium-margin-bottom recommendation-by-action-fieldset">
            <legend>
              <strong>
                Submit a Recommendation by action
              </strong>
            </legend>
            {{#each this.dispositions as |disposition idx|}}
              <h4>
                {{disposition.action.name}}
                <span class="text-small">
                  &nbsp;&nbsp;{{disposition.action.ulurpnumber}}
                </span>
              </h4>
              <PowerSelect
                @searchEnabled={{false}}
                @options={{this.recOptions}}
                @placeholder="Select a recommendation"
                @selected={{disposition.communityboardrecommendation}}
                @onchange={{action "setDispositionRecByPartType" disposition}}
                as |recOption|
              >
                {{recOption}}
              </PowerSelect>
              {{#if (or (eq participantType 'CB') (eq participantType 'BB'))}}
                <legend>
                  <strong>
                    Vote Counts
                  </strong>
                </legend>
                <div class="grid-x grid-margin-x">
                  <div  class="cell medium-3">
                    <label for={{concat "disposition-" (concat idx "-votes-in-favor")}}>
                      Votes In Favor
                    </label>
                    <Input  
                      @id={{concat "disposition-" (concat idx "-votes-in-favor")}}
                      @type="number"
                      @value={{disposition.votinginfavorrecommendation}}
                      @key-up={{fn (mut disposition.votinginfavorrecommendation) value="target.value"}}
                    />
                  </div>
                  <div  class="cell medium-3">
                  <label for={{concat "disposition-" (concat idx "-votes-against")}}>
                    Votes Against
                  </label>
                  <Input
                    @id={{concat "disposition-" (concat idx "-votes-against")}}
                    @type="number"
                    @value={{disposition.votingagainstrecommendation}}
                    @key-up={{fn (mut disposition.votingagainstrecommendation) value="target.value"}}
                  />
                </div>
                <div  class="cell medium-3">
                  <label for={{concat "disposition-" (concat idx "-votes-abstain")}}>
                    Abstain
                  </label>
                  <Input
                    @id={{concat "disposition-" (concat idx "-votes-abstain")}}
                    @type="number"
                    @value={{disposition.votingabstainingonrecommendation}}
                    @key-up={{fn (mut disposition.votingabstainingonrecommendation) value="target.value"}}
                  />
                </div>
                <div  class="cell medium-3">
                  <label for={{concat "disposition-" (concat idx "-votes-total-members")}}>
                    Total Members
                  </label>
                  <Input
                    @id={{concat "disposition-" (concat idx "-votes-total-members")}}
                    @type="number"
                    @value={{disposition.totalmembersappointedtotheboard}}
                    @key-up={{fn (mut disposition.totalmembersappointedtotheboard) value="target.value"}}
                  />
                </div>
                </div>
              {{/if}}
              <hr />
            {{/each}}
          </fieldset>
        </div>
      {{/if}}
      {{#if (or (eq this.submitOneRec true) (eq this.submitOneRec false))}}
        {{#if (or (eq participantType 'CB') (eq participantType 'BB'))}}
          <fieldset class="medium-margin-bottom recommendation-by-action-fieldset">
            <legend>
              <strong>
                Vote Location and Date for all actions
              </strong>
            </legend>
            <div class="grid-x grid-margin-x">
              <div class="cell medium-6">
                <label for="all-actions-vote-location">
                  Vote Location
                </label>
                <Input
                  @id="all-actions-vote-location"
                  @type="text"
                  @placeholder="Add a location"
                  @autocomplete="off"
                  @value={{this.dispositionForAllActions.voteLocation}}
                  @key-up={{fn (mut this.dispositionForAllActions.voteLocation) value="target.value"}}
                />
              </div>
              <div class="cell medium-6">
                <label for="all-actions-vote-date">
                  Vote Date
                </label>
                <PikadayInput
                  @id="all-actions-vote-date"
                  @placeholder='Select a date'
                  @value={{this.dispositionForAllActions.voteDate}}
                  @format='MM/DD/YYYY'
                  @onSelection={{fn (mut this.dispositionForAllActions.voteDate) value="target.value"}}
                />
              </div>
            </div>
          </fieldset>
        {{/if}}
      {{/if}}
    </div>
  </div>
  {{outlet}}
{{/if}}
